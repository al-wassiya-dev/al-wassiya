<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al Wassiya - Votre Testament Islamique Simplifi√©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #C9B178;
            --primary-dark: #A89262;
            --secondary: #2D4C68;
            --accent: #3A5F7E;
            --light: #F8F5EE;
            --dark: #1E1E24;
            --success: #4CAF50;
            --error: #E74C3C;
            --radius: 16px;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #F8F5EE 0%, #E8E2D1 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .skip-to-content {
            position: absolute;
            left: -10000px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }

        .skip-to-content:focus {
            position: static;
            width: auto;
            height: auto;
            background: var(--primary);
            color: white;
            padding: 10px;
            z-index: 1000;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        header {
            background: var(--secondary);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .bismillah {
            font-size: 2rem;
            margin: 20px 0;
            font-weight: bold;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            height: 12px;
            margin: 30px auto 20px;
            max-width: 600px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary);
            border-radius: 100px;
            width: 0%;
            transition: var(--transition);
        }

        .etape-indicator {
            display: flex;
            justify-content: space-between;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .etape-point {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
            z-index: 2;
            transition: var(--transition);
        }

        .etape-point.active {
            background: var(--primary);
            transform: scale(1.2);
        }

        .etape-point.completed {
            background: var(--success);
        }

        .main-content {
            padding: 40px;
        }

        .etape {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .etape.active {
            display: block;
        }

        .etape-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 10px;
            text-align: center;
        }

        .etape-subtitle {
            text-align: center;
            margin-bottom: 40px;
            color: var(--accent);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--secondary);
        }

        .form-control {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: var(--radius);
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(201, 177, 120, 0.3);
        }

        .form-select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: var(--radius);
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            background: white;
            transition: var(--transition);
        }

        .form-select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(201, 177, 120, 0.3);
        }

        .btn {
            display: inline-block;
            padding: 15px 30px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background: var(--accent);
        }

        .btn-secondary:hover {
            background: #2D4C68;
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #3d8b40;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #eee;
        }

        .card {
            background: var(--light);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .add-item-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(201, 177, 120, 0.1);
            border: 2px dashed var(--primary);
            border-radius: var(--radius);
            padding: 20px;
            width: 100%;
            color: var(--primary);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }

        .add-item-btn:hover {
            background: rgba(201, 177, 120, 0.2);
        }

        .add-item-btn i {
            margin-right: 10px;
        }

        .item-form {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }

        .form-col {
            flex: 1;
            padding: 0 10px;
            min-width: 250px;
            margin-bottom: 15px;
        }

        .remove-btn {
            background: var(--error);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 10px 15px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .remove-btn:hover {
            background: #c0392b;
        }

        .remove-btn i {
            margin-right: 5px;
        }

        .save-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 10px 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            opacity: 0;
            transform: translateY(20px);
            transition: var(--transition);
            z-index: 1000;
        }

        .save-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }

        .help-text {
            font-size: 0.9rem;
            color: #777;
            margin-top: 5px;
        }

        .islamic-note {
            background: rgba(45, 76, 104, 0.05);
            border-left: 4px solid var(--secondary);
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            font-size: 0.9rem;
        }

        .summary-item {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .summary-title {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 10px;
        }

        .summary-content {
            color: #555;
        }

        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .badge-primary {
            background: rgba(201, 177, 120, 0.2);
            color: var(--primary-dark);
        }

        .badge-secondary {
            background: rgba(45, 76, 104, 0.1);
            color: var(--secondary);
        }

        .badge-success {
            background: rgba(76, 175, 80, 0.2);
            color: #2e7d32;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header {
                padding: 20px;
            }

            .logo {
                font-size: 2rem;
            }

            .bismillah {
                font-size: 1.5rem;
            }

            .main-content {
                padding: 20px;
            }

            .etape-title {
                font-size: 1.5rem;
            }

            .form-col {
                min-width: 100%;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-to-content">Aller au contenu principal</a>

    <div class="container">
        <header>
            <div class="logo">Al Wassiya</div>
            <div class="subtitle">Votre Testament Islamique Simplifi√©</div>
            <div class="bismillah">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</div>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <div class="etape-indicator">
                <div class="etape-point active" id="etapePoint1">1</div>
                <div class="etape-point" id="etapePoint2">2</div>
                <div class="etape-point" id="etapePoint3">3</div>
                <div class="etape-point" id="etapePoint4">4</div>
                <div class="etape-point" id="etapePoint5">5</div>
                <div class="etape-point" id="etapePoint6">6</div>
            </div>
        </header>

        <main id="main-content" class="main-content">
            <form id="testamentForm">
                <!-- √âtape 1: Informations personnelles -->
                <div class="etape active" id="etape1">
                    <h2 class="etape-title">Vos Informations Personnelles</h2>
                    <p class="etape-subtitle">Renseignez vos informations de base pour commencer</p>

                    <div class="card">
                        <h3 class="card-title">Identit√©</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Sexe *</label>
                            <select class="form-select" name="sexe" required>
                                <option value="">S√©lectionnez votre sexe</option>
                                <option value="Masculin">Masculin</option>
                                <option value="F√©minin">F√©minin</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Nom *</label>
                                    <input type="text" class="form-control" name="nom" required>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Pr√©nom *</label>
                                    <input type="text" class="form-control" name="prenom" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Date de naissance *</label>
                                    <input type="date" class="form-control" name="dateNaissance" required>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Lieu de naissance *</label>
                                    <input type="text" class="form-control" name="lieuNaissance" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Adresse compl√®te *</label>
                            <textarea class="form-control" name="adresse" rows="3" required></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Nationalit√© *</label>
                                    <input type="text" class="form-control" name="nationalite" required>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Situation familiale *</label>
                                    <select class="form-select" name="situationFamiliale" required>
                                        <option value="">S√©lectionnez</option>
                                        <option value="C√©libataire">C√©libataire</option>
                                        <option value="Mari√©(e)">Mari√©(e)</option>
                                        <option value="Divorc√©(e)">Divorc√©(e)</option>
                                        <option value="Veuf/ve">Veuf/ve</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group" id="conjointField">
                            <label class="form-label">Nom et pr√©nom du conjoint</label>
                            <input type="text" class="form-control" name="conjoint">
                        </div>
                    </div>

                    <div class="navigation">
                        <div></div> <!-- Empty div for spacing -->
                        <button type="button" class="btn btn-secondary" onclick="changerEtape(2)">Suivant</button>
                    </div>
                </div>

                <!-- √âtape 2: Personnes √† pr√©venir -->
                <div class="etape" id="etape2">
                    <h2 class="etape-title">Personnes √† Pr√©venir</h2>
                    <p class="etape-subtitle">Indiquez les personnes √† contacter en cas de besoin</p>

                    <div class="card">
                        <h3 class="card-title">Parents</h3>
                        <p class="help-text">Ajoutez vos parents (p√®re, m√®re, etc.)</p>
                        
                        <div id="parents-container"></div>
                        
                        <button type="button" class="add-item-btn" onclick="ajouterPersonne('parents')">
                            <i class="fas fa-plus"></i> Ajouter un parent
                        </button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">Conjoint(s)</h3>
                        <p class="help-text">Ajoutez votre/vos conjoint(s) actuel(s) ou pr√©c√©dent(s)</p>
                        
                        <div id="conjoints-container"></div>
                        
                        <button type="button" class="add-item-btn" onclick="ajouterPersonne('conjoints')">
                            <i class="fas fa-plus"></i> Ajouter un conjoint
                        </button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">Fr√®res et Soeurs</h3>
                        <p class="help-text">Ajoutez vos fr√®res et soeurs</p>
                        
                        <div id="freres-soeurs-container"></div>
                        
                        <button type="button" class="add-item-btn" onclick="ajouterPersonne('freres-soeurs')">
                            <i class="fas fa-plus"></i> Ajouter un fr√®re/une soeur
                        </button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">Enfants</h3>
                        <p class="help-text">Ajoutez vos enfants</p>
                        
                        <div id="enfants-container"></div>
                        
                        <button type="button" class="add-item-btn" onclick="ajouterPersonne('enfants')">
                            <i class="fas fa-plus"></i> Ajouter un enfant
                        </button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">Amis proches</h3>
                        <p class="help-text">Ajoutez des amis proches ou autres personnes importantes</p>
                        
                        <div id="amis-container"></div>
                        
                        <button type="button" class="add-item-btn" onclick="ajouterPersonne('amis')">
                            <i class="fas fa-plus"></i> Ajouter un ami proche
                        </button>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-outline" onclick="changerEtape(1)">Pr√©c√©dent</button>
                        <button type="button" class="btn btn-secondary" onclick="changerEtape(3)">Suivant</button>
                    </div>
                                    </div><!-- √âtape 3: Biens et possessions -->
<div class="etape" id="etape3">
    <h2 class="etape-title">Biens et Possessions</h2>
    <p class="etape-subtitle">D√©clarez vos biens mat√©riels et financiers</p>

    <div class="islamic-note">
        <strong>Note importante:</strong> Selon le droit islamique, seuls le tiers (1/3) de vos biens peut √™tre l√©gu√© librement. Les deux tiers restants sont distribu√©s selon les r√®gles coraniques de l'h√©ritage.
    </div>

    <div class="card">
        <h3 class="card-title">Biens immobiliers</h3>
        <p class="help-text">Maisons, appartements, terrains, etc.</p>
        
        <div id="immobilier-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterBien('immobilier')">
            <i class="fas fa-plus"></i> Ajouter un bien immobilier
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">V√©hicules et biens mat√©riels</h3>
        <p class="help-text">Voitures, motos, √©quipements, etc.</p>
        
        <div id="materiel-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterBien('materiel')">
            <i class="fas fa-plus"></i> Ajouter un bien mat√©riel
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">Biens personnels de valeur</h3>
        <p class="help-text">Bijoux, ≈ìuvres d'art, collections, etc.</p>
        
        <div id="personnels-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterBien('personnels')">
            <i class="fas fa-plus"></i> Ajouter un bien personnel
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">Comptes bancaires</h3>
        <p class="help-text">Comptes courants, comptes √©pargne, etc.</p>
        
        <div id="comptes-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterCompte('comptes')">
            <i class="fas fa-plus"></i> Ajouter un compte bancaire
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">Cartes bancaires</h3>
        <p class="help-text">Cartes de cr√©dit, cartes de d√©bit, etc.</p>
        
        <div id="cartes-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterCarte('cartes')">
            <i class="fas fa-plus"></i> Ajouter une carte bancaire
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">Applications bancaires</h3>
        <p class="help-text">Applications mobiles, codes d'acc√®s, etc.</p>
        
        <div id="applications-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterApplication('applications')">
            <i class="fas fa-plus"></i> Ajouter une application bancaire
        </button>
    </div>

    <div class="navigation">
        <button type="button" class="btn btn-outline" onclick="changerEtape(2)">Pr√©c√©dent</button>
        <button type="button" class="btn btn-secondary" onclick="changerEtape(4)">Suivant</button>
    </div>
</div>

<!-- √âtape 4: Dettes et obligations -->
<div class="etape" id="etape4">
    <h2 class="etape-title">Dettes et Obligations</h2>
    <p class="etape-subtitle">D√©clarez vos dettes et obligations religieuses</p>

    <div class="islamic-note">
        <strong>Note importante:</strong> Selon l'Islam, toutes les dettes doivent √™tre r√©gl√©es avant la distribution de l'h√©ritage. Il est essentiel de les mentionner ici.
    </div>

    <div class="card">
        <h3 class="card-title">Cr√©ances √† percevoir</h3>
        <p class="help-text">Argent que d'autres personnes vous doivent</p>
        
        <div id="creances-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterCreance('creances')">
            <i class="fas fa-plus"></i> Ajouter une cr√©ance
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">Dettes √† r√©gler</h3>
        <p class="help-text">Argent que vous devez √† d'autres personnes</p>
        
        <div id="dettes-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterDette('dettes')">
            <i class="fas fa-plus"></i> Ajouter une dette
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">Sadaqa et legs charitables</h3>
        <p class="help-text">Dons et ≈ìuvres caritatives que vous souhaitez effectuer</p>
        
        <div id="sadaqa-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterSadaqa('sadaqa')">
            <i class="fas fa-plus"></i> Ajouter un legs charitable
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">Obligations religieuses</h3>
        
        <div class="form-group">
            <label class="form-label">Zakat</label>
            <select class="form-select" name="zakatStatus">
                <option value="">S√©lectionnez le statut de votre Zakat</option>
                <option value="versee">Zakat vers√©e</option>
                <option value="non-versee">Zakat non vers√©e</option>
                <option value="partielle">Zakat partiellement vers√©e</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Je√ªne de Ramadan</label>
            <select class="form-select" name="jeuneStatus">
                <option value="">S√©lectionnez le statut de votre je√ªne</option>
                <option value="0">Aucun jour √† rattraper</option>
                <option value="1">1 jour √† rattraper</option>
                <option value="2">2 jours √† rattraper</option>
                <option value="3">3 jours √† rattraper</option>
                <option value="4">4 jours √† rattraper</option>
                <option value="5">5 jours √† rattraper</option>
                <option value="plus">Plus de 5 jours √† rattraper</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Notes sur le je√ªne (si n√©cessaire)</label>
            <textarea class="form-control" name="jeuneNotes" rows="3"></textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">P√®lerinage (Hadj)</label>
            <select class="form-select" name="hadjStatus">
                <option value="">S√©lectionnez le statut de votre Hadj</option>
                <option value="accompli">Hadj accompli</option>
                <option value="non-accompli">Hadj non accompli</option>
                <option value="partiel">Hadj partiellement accompli (Omra seulement)</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Notes sur le Hadj (si n√©cessaire)</label>
            <textarea class="form-control" name="hadjNotes" rows="3"></textarea>
        </div>
    </div>

    <div class="navigation">
        <button type="button" class="btn btn-outline" onclick="changerEtape(3)">Pr√©c√©dent</button>
        <button type="button" class="btn btn-secondary" onclick="changerEtape(5)">Suivant</button>
    </div>
</div>

<!-- √âtape 5: H√©ritage et legs -->
<div class="etape" id="etape5">
    <h2 class="etape-title">H√©ritage et Legs</h2>
    <p class="etape-subtitle">Exprimez vos volont√©s concernant la r√©partition de vos biens</p>

    <div class="islamic-note">
        <strong>Note importante:</strong> Selon le droit islamique, seuls le tiers (1/3) de vos biens peut √™tre l√©gu√© librement. Les deux tiers restants sont distribu√©s selon les r√®gles coraniques de l'h√©ritage.
    </div>

    <div class="card">
        <h3 class="card-title">R√©partition de l'h√©ritage</h3>
        <p class="help-text">Vous pouvez ajouter des notes concernant la r√©partition de vos biens selon les r√®gles islamiques</p>
        
        <div class="form-group">
            <label class="form-label">Notes sur l'h√©ritage</label>
            <textarea class="form-control" name="heritageNotes" rows="5" placeholder="Ex: Je souhaite que mes biens soient r√©partis selon les r√®gles coraniques..."></textarea>
        </div>
    </div>

    <div class="card">
        <h3 class="card-title">Legs testamentaires (Wasiyya)</h3>
        <p class="help-text">Ajoutez des legs sp√©cifiques (dans la limite du tiers de vos biens)</p>
        
        <div id="legs-container"></div>
        
        <button type="button" class="add-item-btn" onclick="ajouterLeg('legs')">
            <i class="fas fa-plus"></i> Ajouter un legs
        </button>
    </div>

    <div class="card">
        <h3 class="card-title">Ex√©cuteur testamentaire</h3>
        <p class="help-text">Personne qui s'assurera que vos volont√©s sont respect√©es</p>
        
        <div class="form-group">
            <label class="form-label">Personne sugg√©r√©e comme ex√©cuteur testamentaire</label>
            <input type="text" class="form-control" name="executeurTestament" placeholder="Nom et pr√©nom">
        </div>
        
        <div class="form-group">
            <label class="form-label">Contact de l'ex√©cuteur testamentaire</label>
            <input type="text" class="form-control" name="contactExecuteur" placeholder="T√©l√©phone ou email">
        </div>
    </div>

    <div class="card">
        <h3 class="card-title">Volont√©s concernant les obs√®ques</h3>
        
        <div class="form-group">
            <label class="form-label">Volont√©s particuli√®res</label>
            <textarea class="form-control" name="volontesObseques" rows="4" placeholder="Ex: Je souhaite que mes obs√®ques soient effectu√©es selon les traditions islamiques..."></textarea>
        </div>
    </div>

    <div class="card">
        <h3 class="card-title">Recommandations √† la famille</h3>
        
        <div class="form-group">
            <label class="form-label">Message √† votre famille</label>
            <textarea class="form-control" name="recommandationsFamille" rows="4" placeholder="Ex: Je recommande √† mes enfants de rester unis et de pr√©server leurs liens familiaux..."></textarea>
        </div>
    </div>

    <div class="navigation">
        <button type="button" class="btn btn-outline" onclick="changerEtape(4)">Pr√©c√©dent</button>
        <button type="button" class="btn btn-secondary" onclick="changerEtape(6)">Suivant</button>
    </div>
</div>            <!-- √âtape 6: Donn√©es num√©riques -->
            <div class="etape" id="etape6">
                <h2 class="etape-title">Donn√©es Num√©riques</h2>
                <p class="etape-subtitle">Indiquez vos comptes num√©riques et mots de passe importants</p>

                <div class="islamic-note">
                    <strong>Note importante:</strong> Ces informations sont cruciales pour permettre √† vos h√©ritiers d'acc√©der √† vos comptes et de g√©rer vos affaires num√©riques apr√®s votre d√©c√®s.
                </div>

                <div class="card">
                    <h3 class="card-title">R√©seaux sociaux</h3>
                    <p class="help-text">Comptes Facebook, Instagram, Twitter, LinkedIn, etc.</p>
                    
                    <div id="reseaux_sociaux-container"></div>
                    
                    <button type="button" class="add-item-btn" onclick="ajouterReseauSocial('reseaux_sociaux')">
                        <i class="fas fa-plus"></i> Ajouter un r√©seau social
                    </button>
                </div>

                <div class="card">
                    <h3 class="card-title">Comptes email</h3>
                    <p class="help-text">Adresses email personnelles et professionnelles</p>
                    
                    <div id="emails-container"></div>
                    
                    <button type="button" class="add-item-btn" onclick="ajouterEmail('emails')">
                        <i class="fas fa-plus"></i> Ajouter un compte email
                    </button>
                </div>

                <div class="card">
                    <h3 class="card-title">Comptes en ligne importants</h3>
                    <p class="help-text">Sites de e-commerce, abonnements, services en ligne</p>
                    
                    <div id="comptes_online-container"></div>
                    
                    <button type="button" class="add-item-btn" onclick="ajouterCompteOnline('comptes_online')">
                        <i class="fas fa-plus"></i> Ajouter un compte en ligne
                    </button>
                </div>

                <div class="card">
                    <h3 class="card-title">Services cloud et stockage</h3>
                    <p class="help-text">Google Drive, iCloud, Dropbox, etc.</p>
                    
                    <div id="cloud-container"></div>
                    
                    <button type="button" class="add-item-btn" onclick="ajouterCloud('cloud')">
                        <i class="fas fa-plus"></i> Ajouter un service cloud
                    </button>
                </div>

                <div class="card">
                    <h3 class="card-title">Appareils s√©curis√©s</h3>
                    <p class="help-text">T√©l√©phones, ordinateurs, tablettes avec codes d'acc√®s</p>
                    
                    <div id="appareils-container"></div>
                    
                    <button type="button" class="add-item-btn" onclick="ajouterAppareil('appareils')">
                        <i class="fas fa-plus"></i> Ajouter un appareil
                    </button>
                </div>

                <div class="card">
                    <h3 class="card-title">Autres personnes √† mentionner</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Personnes importantes non mentionn√©es pr√©c√©demment</label>
                        <textarea class="form-control" name="autresProches" rows="4" placeholder="Ex: Mes cousins, oncles, tantes, amis proches..."></textarea>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">Relations particuli√®res</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Relations √† mentionner sp√©cifiquement</label>
                        <textarea class="form-control" name="relationsParticulieres" rows="4" placeholder="Ex: Relations familiales particuli√®res, amiti√©s importantes..."></textarea>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">Autres volont√©s</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Toute autre volont√© non mentionn√©e pr√©c√©demment</label>
                        <textarea class="form-control" name="autresVolontes" rows="4" placeholder="Ex: Souhaits particuliers, messages personnels..."></textarea>
                    </div>
                </div>

                <div class="navigation">
                    <button type="button" class="btn btn-outline" onclick="changerEtape(5)">Pr√©c√©dent</button>
                    <button type="button" class="btn btn-success" onclick="afficherResume()">Voir le r√©sum√©</button>
                </div>
            </div>

            <!-- √âtape 7: R√©capitulatif -->
            <div class="etape" id="etape7">
                <h2 class="etape-title">R√©capitulatif de Votre Testament</h2>
                <p class="etape-subtitle">V√©rifiez toutes les informations avant de finaliser</p>

                <div id="resume-container" class="resume-container">
                    <!-- Le contenu du r√©sum√© sera g√©n√©r√© ici par JavaScript -->
                </div>

                <div class="navigation">
                    <button type="button" class="btn btn-outline" onclick="changerEtape(6)">Pr√©c√©dent</button>
                    <button type="button" class="btn btn-success" onclick="genererPDF()">
                        <i class="fas fa-download"></i> T√©l√©charger le PDF
                    </button>
                </div>
            </div>
        </form>
    </main>
</div>

<div class="save-indicator" id="saveIndicator">Sauvegarde effectu√©e</div>

<script>
    // Variables globales
    let etapeActuelle = 1;
    const totalEtapes = 6;

    // Afficher l'√©tape actuelle
    function afficherEtape(numero) {
        document.querySelectorAll('.etape').forEach(etape => {
            etape.classList.remove('active');
        });
        document.getElementById('etape' + numero).classList.add('active');
        
        // Mettre √† jour la barre de progression
        const pourcentage = ((numero - 1) / (totalEtapes - 1)) * 100;
        document.getElementById('progressBar').style.width = pourcentage + '%';
        
        // Mettre √† jour les points d'√©tape
        document.querySelectorAll('.etape-point').forEach((point, index) => {
            point.classList.remove('active', 'completed');
            if (index + 1 === numero) {
                point.classList.add('active');
            } else if (index + 1 < numero) {
                point.classList.add('completed');
            }
        });
    }

    // Changer d'√©tape
    function changerEtape(nouvelleEtape) {
        // Validation basique pour l'√©tape 1
        if (nouvelleEtape === 2 && etapeActuelle === 1) {
            const requiredFields = document.querySelectorAll('#etape1 input[required], #etape1 select[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                    field.style.borderColor = 'var(--error)';
                } else {
                    field.style.borderColor = '';
                }
            });
            
            if (!isValid) {
                alert('Veuillez remplir tous les champs obligatoires avant de continuer.');
                return;
            }
        }
        
        etapeActuelle = nouvelleEtape;
        afficherEtape(etapeActuelle);
        window.scrollTo(0, 0);
    }

    // Afficher/masquer le champ conjoint selon la situation familiale
    document.querySelector('select[name="situationFamiliale"]').addEventListener('change', function() {
        const conjointField = document.getElementById('conjointField');
        if (this.value === 'Mari√©(e)') {
            conjointField.style.display = 'block';
        } else {
            conjointField.style.display = 'none';
            document.querySelector('input[name="conjoint"]').value = '';
        }
    });

    // Ajouter une personne (parents, conjoints, etc.)
    function ajouterPersonne(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Pr√©nom</label>
                        <input type="text" class="form-control" name="${type}[${index}][prenom]">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Nom</label>
                        <input type="text" class="form-control" name="${type}[${index}][nom]">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">T√©l√©phone</label>
                        <input type="tel" class="form-control" name="${type}[${index}][telephone]">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Relation</label>
                        <input type="text" class="form-control" name="${type}[${index}][relation]" placeholder="Ex: P√®re, M√®re, Fr√®re, etc.">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Adresse</label>
                <textarea class="form-control" name="${type}[${index}][adresse]" rows="2"></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter un bien immobilier
    function ajouterBien(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        let fields = '';
        if (type === 'immobilier') {
            fields = `
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Type de bien</label>
                            <select class="form-select" name="${type}[${index}][type]">
                                <option value="">S√©lectionnez</option>
                                <option value="Maison">Maison</option>
                                <option value="Appartement">Appartement</option>
                                <option value="Terrain">Terrain</option>
                                <option value="Local commercial">Local commercial</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Valeur estim√©e (‚Ç¨)</label>
                            <input type="number" class="form-control" name="${type}[${index}][valeur]">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Adresse</label>
                    <textarea class="form-control" name="${type}[${index}][adresse]" rows="2"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Statut</label>
                            <select class="form-select" name="${type}[${index}][statut]">
                                <option value="">S√©lectionnez</option>
                                <option value="Propri√©taire">Propri√©taire</option>
                                <option value="Locataire">Locataire</option>
                                <option value="En cours d'acquisition">En cours d'acquisition</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Informations compl√©mentaires</label>
                            <input type="text" class="form-control" name="${type}[${index}][info]">
                        </div>
                    </div>
                </div>
            `;
        } else {
            fields = `
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Type</label>
                            <input type="text" class="form-control" name="${type}[${index}][type]" placeholder="Ex: Voiture, Motocyclette, Bijou, etc.">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Valeur estim√©e (‚Ç¨)</label>
                            <input type="number" class="form-control" name="${type}[${index}][valeur]">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" name="${type}[${index}][description]" rows="2"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Lieu de stockage</label>
                            <input type="text" class="form-control" name="${type}[${index}][lieu]">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Informations compl√©mentaires</label>
                            <input type="text" class="form-control" name="${type}[${index}][info]">
                        </div>
                    </div>
                </div>
            `;
        }
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = fields + `
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter un compte bancaire
    function ajouterCompte(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Banque</label>
                        <input type="text" class="form-control" name="${type}[${index}][banque]">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Type de compte</label>
                        <select class="form-select" name="${type}[${index}][type]">
                            <option value="">S√©lectionnez</option>
                            <option value="Compte courant">Compte courant</option>
                            <option value="Compte √©pargne">Compte √©pargne</option>
                            <option value="Compte entreprise">Compte entreprise</option>
                            <option value="Compte joint">Compte joint</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Num√©ro de compte/IBAN</label>
                        <input type="text" class="form-control" name="${type}[${index}][iban]">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Solde approximatif (‚Ç¨)</label>
                        <input type="number" class="form-control" name="${type}[${index}][solde]">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Adresse de l'agence</label>
                <textarea class="form-control" name="${type}[${index}][adresse]" rows="2"></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter une carte bancaire
    function ajouterCarte(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Type de carte</label>
                        <select class="form-select" name="${type}[${index}][type]">
                            <option value="">S√©lectionnez</option>
                            <option value="Carte de cr√©dit">Carte de cr√©dit</option>
                            <option value="Carte de d√©bit">Carte de d√©bit</option>
                            <option value="Carte pr√©pay√©e">Carte pr√©pay√©e</option>
                        </select>
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Num√©ro de carte</label>
                        <input type="text" class="form-control" name="${type}[${index}][numero]">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Date d'expiration</label>
                        <input type="text" class="form-control" name="${type}[${index}][expiration]" placeholder="MM/AA">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Code (CVV)</label>
                        <input type="text" class="form-control" name="${type}[${index}][code]">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Banque √©mettrice</label>
                        <input type="text" class="form-control" name="${type}[${index}][banque]">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Plafond de retrait (‚Ç¨)</label>
                        <input type="number" class="form-control" name="${type}[${index}][plafond]">
                    </div>
                </div>
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter une application bancaire
    function ajouterApplication(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Nom de l'application</label>
                        <input type="text" class="form-control" name="${type}[${index}][application]">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Identifiant</label>
                        <input type="text" class="form-control" name="${type}[${index}][identifiant]">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Email associ√©</label>
                        <input type="email" class="form-control" name="${type}[${index}][email]">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">T√©l√©phone associ√©</label>
                        <input type="tel" class="form-control" name="${type}[${index}][telephone]">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Indice pour le mot de passe</label>
                <input type="text" class="form-control" name="${type}[${index}][indice]">
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter une cr√©ance
    function ajouterCreance(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Type de cr√©ance</label>
                        <select class="form-select" name="${type}[${index}][type]">
                            <option value="">S√©lectionnez</option>
                            <option value="Pr√™t personnel">Pr√™t personnel</option>
                            <option value="Avance sur salaire">Avance sur salaire</option>
                            <option value="Vente √† cr√©dit">Vente √† cr√©dit</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Montant (‚Ç¨)</label>
                        <input type="number" class="form-control" name="${type}[${index}][montant]">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">D√©biteur</label>
                        <input type="text" class="form-control" name="${type}[${index}][nom]" placeholder="Nom et pr√©nom">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Date de remboursement pr√©vue</label>
                        <input type="date" class="form-control" name="${type}[${index}][date_remboursement]">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-control" name="${type}[${index}][description]" rows="2"></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter une dette
    function ajouterDette(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Type de dette</label>
                        <select class="form-select" name="${type}[${index}][type]">
                            <option value="">S√©lectionnez</option>
                            <option value="Pr√™t bancaire">Pr√™t bancaire</option>
                            <option value="Cr√©dit immobilier">Cr√©dit immobilier</option>
                            <option value="Cr√©dit consommation">Cr√©dit √† la consommation</option>
                            <option value="Dette personnelle">Dette personnelle</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Montant restant (‚Ç¨)</label>
                        <input type="number" class="form-control" name="${type}[${index}][montant]">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Cr√©ancier</label>
                        <input type="text" class="form-control" name="${type}[${index}][nom]" placeholder="Nom de la banque ou personne">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Date d'√©ch√©ance</label>
                        <input type="date" class="form-control" name="${type}[${index}][date_echeance]">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-control" name="${type}[${index}][description]" rows="2"></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter une sadaqa
    function ajouterSadaqa(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Type de legs charitable</label>
                        <select class="form-select" name="${type}[${index}][type]">
                            <option value="">S√©lectionnez</option>
                            <option value="Sadaqa">Sadaqa (aum√¥ne)</option>
                            <option value="Waqf">Waqf (fondation pieuse)</option>
                            <option value="Projet humanitaire">Projet humanitaire</option>
                            <option value="Construction mosqu√©e">Construction de mosqu√©e</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Montant ou valeur (‚Ç¨)</label>
                        <input type="number" class="form-control" name="${type}[${index}][montant]">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">B√©n√©ficiaire</label>
                <input type="text" class="form-control" name="${type}[${index}][beneficiaire]" placeholder="Nom de l'organisation ou personne">
            </div>
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-control" name="${type}[${index}][description]" rows="2"></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter un legs
    function ajouterLeg(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">B√©n√©ficiaire du legs</label>
                        <input type="text" class="form-control" name="${type}[${index}][beneficiaire]" placeholder="Nom et pr√©nom">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Relation avec le b√©n√©ficiaire</label>
                        <input type="text" class="form-control" name="${type}[${index}][relation]" placeholder="Ex: Ami, neveu, organisation, etc.">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Type de legs</label>
                        <select class="form-select" name="${type}[${index}][type]">
                            <option value="">S√©lectionnez</option>
                            <option value="Argent">Argent</option>
                            <option value="Bien immobilier">Bien immobilier</option>
                            <option value="Bien personnel">Bien personnel</option>
                            <option value="Pourcentage">Pourcentage de l'h√©ritage</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Valeur (‚Ç¨) ou pourcentage</label>
                        <input type="text" class="form-control" name="${type}[${index}][valeur]" placeholder="Ex: 5000 ou 10%">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Description d√©taill√©e</label>
                <textarea class="form-control" name="${type}[${index}][description]" rows="3"></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }

    // Ajouter un r√©seau social
    function ajouterReseauSocial(type) {
        const container = document.getElementById(type + '-container');
        const index = container.children.length;
        
        const form = document.createElement('div');
        form.className = 'item-form';
        form.innerHTML = `
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">R√©seau social</label>
                        <select class="form-select" name="${type}[${index}][type]">
                            <option value="">S√©lectionnez</option>
                            <option value="Facebook">Facebook</option>
                            <option value="Instagram">Instagram</option>
                            <option value="Twitter">Twitter</option>
                            <option value="LinkedIn">LinkedIn</option>
                            <option value="TikTok">TikTok</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Pseudo/Identifiant</label>
                        <input type="text" class="form-control" name="${type}[${index}][pseudo]">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">Email associ√©</label>
                        <input type="email" class="form-control" name="${type}[${index}][email]">
                    </div>
                </div>
                <div class="form-col">
                    <div class="form-group">
                        <label class="form-label">T√©l√©phone associ√©</label>
                        <input type="tel" class="form-control" name="${type}[${index}][telephone]">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Compl√©ments d'information</label>
                <textarea class="form-control" name="${type}[${index}][complements]" rows="2"></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                <i class="fas fa-trash"></i> Supprimer
            </button>
        `;
        
        container.appendChild(form);
    }        // Ajouter un email
        function ajouterEmail(type) {
            const container = document.getElementById(type + '-container');
            const index = container.children.length;
            
            const form = document.createElement('div');
            form.className = 'item-form';
            form.innerHTML = `
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Adresse email</label>
                            <input type="email" class="form-control" name="${type}[${index}][adresse]">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Type de compte</label>
                            <select class="form-select" name="${type}[${index}][type]">
                                <option value="">S√©lectionnez</option>
                                <option value="Personnel">Personnel</option>
                                <option value="Professionnel">Professionnel</option>
                                <option value="Secondaire">Secondaire</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Compl√©ments d'information</label>
                    <textarea class="form-control" name="${type}[${index}][complements]" rows="2"></textarea>
                </div>
                <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                    <i class="fas fa-trash"></i> Supprimer
                </button>
            `;
            
            container.appendChild(form);
        }

        // Ajouter un compte en ligne
        function ajouterCompteOnline(type) {
            const container = document.getElementById(type + '-container');
            const index = container.children.length;
            
            const form = document.createElement('div');
            form.className = 'item-form';
            form.innerHTML = `
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Site/Application</label>
                            <input type="text" class="form-control" name="${type}[${index}][site]" placeholder="Ex: Amazon, Netflix, etc.">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Identifiant</label>
                            <input type="text" class="form-control" name="${type}[${index}][identifiant]">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Email associ√©</label>
                            <input type="email" class="form-control" name="${type}[${index}][email]">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Mot de passe (indice)</label>
                            <input type="text" class="form-control" name="${type}[${index}][indice]">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Compl√©ments d'information</label>
                    <textarea class="form-control" name="${type}[${index}][complements]" rows="2"></textarea>
                </div>
                <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                    <i class="fas fa-trash"></i> Supprimer
                </button>
            `;
            
            container.appendChild(form);
        }

        // Ajouter un service cloud
        function ajouterCloud(type) {
            const container = document.getElementById(type + '-container');
            const index = container.children.length;
            
            const form = document.createElement('div');
            form.className = 'item-form';
            form.innerHTML = `
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Service cloud</label>
                            <select class="form-select" name="${type}[${index}][service]">
                                <option value="">S√©lectionnez</option>
                                <option value="Google Drive">Google Drive</option>
                                <option value="Dropbox">Dropbox</option>
                                <option value="iCloud">iCloud</option>
                                <option value="OneDrive">OneDrive</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Pseudo/Identifiant</label>
                            <input type="text" class="form-control" name="${type}[${index}][pseudo]">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Email associ√©</label>
                            <input type="email" class="form-control" name="${type}[${index}][email]">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Espace de stockage</label>
                            <input type="text" class="form-control" name="${type}[${index}][espace]" placeholder="Ex: 100 Go, 1 To, etc.">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Compl√©ments d'information</label>
                    <textarea class="form-control" name="${type}[${index}][complements]" rows="2"></textarea>
                </div>
                <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                    <i class="fas fa-trash"></i> Supprimer
                </button>
            `;
            
            container.appendChild(form);
        }

        // Ajouter un appareil
        function ajouterAppareil(type) {
            const container = document.getElementById(type + '-container');
            const index = container.children.length;
            
            const form = document.createElement('div');
            form.className = 'item-form';
            form.innerHTML = `
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Type d'appareil</label>
                            <select class="form-select" name="${type}[${index}][type]">
                                <option value="">S√©lectionnez</option>
                                <option value="T√©l√©phone portable">T√©l√©phone portable</option>
                                <option value="Ordinateur portable">Ordinateur portable</option>
                                <option value="Ordinateur fixe">Ordinateur fixe</option>
                                <option value="Tablette">Tablette</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Mod√®le</label>
                            <input type="text" class="form-control" name="${type}[${index}][modele]" placeholder="Ex: iPhone 12, Samsung Galaxy, etc.">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Code de d√©verrouillage</label>
                            <input type="text" class="form-control" name="${type}[${index}][code]">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label">Empreinte digitale</label>
                            <select class="form-select" name="${type}[${index}][empreinte]">
                                <option value="">S√©lectionnez</option>
                                <option value="Doigt droit">Doigt droit</option>
                                <option value="Doigt gauche">Doigt gauche</option>
                                <option value="Pouce droit">Pouce droit</option>
                                <option value="Pouce gauche">Pouce gauche</option>
                                <option value="Non applicable">Non applicable</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Compl√©ments d'information</label>
                    <textarea class="form-control" name="${type}[${index}][complements]" rows="2"></textarea>
                </div>
                <button type="button" class="remove-btn" onclick="this.parentElement.remove();">
                    <i class="fas fa-trash"></i> Supprimer
                </button>
            `;
            
            container.appendChild(form);
        }

        // Afficher le r√©sum√©
        function afficherResume() {
            const resumeContainer = document.getElementById('resume-container');
            resumeContainer.innerHTML = '<div class="card"><h3 class="card-title">Chargement du r√©sum√©...</h3></div>';
            
            // Simuler un chargement
            setTimeout(() => {
                const data = recupererToutesLesDonnees();
                let resumeHTML = '';
                
                // Informations personnelles
                resumeHTML += `
                    <div class="card">
                        <h3 class="card-title">Informations Personnelles</h3>
                        <div class="summary-item">
                            <div class="summary-title">Identit√©</div>
                            <div class="summary-content">
                                ${data.prenom || ''} ${data.nom || ''} (${data.sexe || 'Non pr√©cis√©'})<br>
                                N√©(e) le ${data.dateNaissance ? new Date(data.dateNaissance).toLocaleDateString('fr-FR') : 'Non pr√©cis√©'} √† ${data.lieuNaissance || 'Non pr√©cis√©'}<br>
                                ${data.nationalite || 'Non pr√©cis√©'}, ${data.situationFamiliale || 'Non pr√©cis√©'}
                                ${data.conjoint ? ', Conjoint: ' + data.conjoint : ''}
                            </div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-title">Adresse</div>
                            <div class="summary-content">${data.adresse || 'Non pr√©cis√©e'}</div>
                        </div>
                    </div>
                `;
                
                // Personnes √† pr√©venir
                const categoriesPersonnes = ['parents', 'conjoints', 'freres-soeurs', 'enfants', 'amis'];
                categoriesPersonnes.forEach(category => {
                    if (data[category] && data[category].length > 0) {
                        let categoryTitle = '';
                        switch(category) {
                            case 'parents': categoryTitle = 'Parents'; break;
                            case 'conjoints': categoryTitle = 'Conjoints'; break;
                            case 'freres-soeurs': categoryTitle = 'Fr√®res et Soeurs'; break;
                            case 'enfants': categoryTitle = 'Enfants'; break;
                            case 'amis': categoryTitle = 'Amis proches'; break;
                        }
                        
                        resumeHTML += `<div class="card"><h3 class="card-title">${categoryTitle}</h3>`;
                        
                        data[category].forEach((person, index) => {
                            resumeHTML += `
                                <div class="summary-item">
                                    <div class="summary-title">Personne ${index + 1}</div>
                                    <div class="summary-content">
                                        ${person.prenom || ''} ${person.nom || ''}<br>
                                        ${person.relation ? 'Relation: ' + person.relation + '<br>' : ''}
                                        ${person.telephone ? 'T√©l√©phone: ' + person.telephone + '<br>' : ''}
                                        ${person.adresse ? 'Adresse: ' + person.adresse : ''}
                                    </div>
                                </div>
                            `;
                        });
                        
                        resumeHTML += `</div>`;
                    }
                });
                
                // Biens et possessions
                const categoriesBiens = ['immobilier', 'materiel', 'personnels', 'comptes', 'cartes', 'applications'];
                categoriesBiens.forEach(category => {
                    if (data[category] && data[category].length > 0) {
                        let categoryTitle = '';
                        switch(category) {
                            case 'immobilier': categoryTitle = 'Biens Immobiliers'; break;
                            case 'materiel': categoryTitle = 'Biens Mat√©riels'; break;
                            case 'personnels': categoryTitle = 'Biens Personnels'; break;
                            case 'comptes': categoryTitle = 'Comptes Bancaires'; break;
                            case 'cartes': categoryTitle = 'Cartes Bancaires'; break;
                            case 'applications': categoryTitle = 'Applications Bancaires'; break;
                        }
                        
                        resumeHTML += `<div class="card"><h3 class="card-title">${categoryTitle}</h3>`;
                        
                        data[category].forEach((item, index) => {
                            resumeHTML += `
                                <div class="summary-item">
                                    <div class="summary-title">√âl√©ment ${index + 1}</div>
                                    <div class="summary-content">`;
                            
                            switch(category) {
                                case 'immobilier':
                                    resumeHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Adresse: ${item.adresse || 'Non pr√©cis√©e'}, Valeur: ${item.valeur || 'Non pr√©cis√©e'}‚Ç¨, Statut: ${item.statut || 'Non pr√©cis√©'}`;
                                    if (item.info) resumeHTML += `, Info: ${item.info}`;
                                    break;
                                    
                                case 'materiel':
                                case 'personnels':
                                    resumeHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Description: ${item.description || 'Non pr√©cis√©e'}, Valeur: ${item.valeur || 'Non pr√©cis√©e'}‚Ç¨, Lieu: ${item.lieu || 'Non pr√©cis√©'}`;
                                    break;
                                            
                                case 'comptes':
                                    resumeHTML += `Banque: ${item.banque || 'Non pr√©cis√©e'}, Type: ${item.type || 'Non pr√©cis√©'}, IBAN: ${item.iban || 'Non pr√©cis√©'}, Solde: ${item.solde || 'Non pr√©cis√©'}‚Ç¨`;
                                    if (item.adresse) resumeHTML += `, Adresse: ${item.adresse}`;
                                    break;
                                    
                                case 'cartes':
                                    resumeHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Num√©ro: ${item.numero || 'Non pr√©cis√©'}, Expiration: ${item.expiration || 'Non pr√©cis√©e'}, Banque: ${item.banque || 'Non pr√©cis√©e'}`;
                                    if (item.code) resumeHTML += `, Code: ${item.code}`;
                                    break;
                                    
                                case 'applications':
                                    resumeHTML += `Application: ${item.application || 'Non pr√©cis√©e'}, Identifiant: ${item.identifiant || 'Non pr√©cis√©'}, Email: ${item.email || 'Non pr√©cis√©'}, T√©l√©phone: ${item.telephone || 'Non pr√©cis√©'}`;
                                    if (item.indice) resumeHTML += `, Indice: ${item.indice}`;
                                    break;
                            }
                            
                            resumeHTML += `</div></div>`;
                        });
                        
                        resumeHTML += `</div>`;
                    }
                });
                
                // Dettes et obligations
                const categoriesDettes = ['creances', 'dettes', 'sadaqa'];
                categoriesDettes.forEach(category => {
                    if (data[category] && data[category].length > 0) {
                        let categoryTitle = '';
                        switch(category) {
                            case 'creances': categoryTitle = 'Cr√©ances √† Percevoir'; break;
                            case 'dettes': categoryTitle = 'Dettes √† R√©gler'; break;
                            case 'sadaqa': categoryTitle = 'Sadaqa et Legs Charitables'; break;
                        }
                        
                        resumeHTML += `<div class="card"><h3 class="card-title">${categoryTitle}</h3>`;
                        
                        data[category].forEach((item, index) => {
                            resumeHTML += `
                                <div class="summary-item">
                                    <div class="summary-title">√âl√©ment ${index + 1}</div>
                                    <div class="summary-content">`;
                            
                            switch(category) {
                                case 'creances':
                                    resumeHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Montant: ${item.montant || 'Non pr√©cis√©'}‚Ç¨, D√©biteur: ${item.nom || 'Non pr√©cis√©'}`;
                                    if (item.date_remboursement) resumeHTML += `, Date remboursement: ${item.date_remboursement}`;
                                    break;
                                    
                                case 'dettes':
                                    resumeHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Montant: ${item.montant || 'Non pr√©cis√©'}‚Ç¨, Cr√©ancier: ${item.nom || 'Non pr√©cis√©'}`;
                                    if (item.date_echeance) resumeHTML += `, Date √©ch√©ance: ${item.date_echeance}`;
                                    break;
                                    
                                case 'sadaqa':
                                    resumeHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Description: ${item.description || 'Non pr√©cis√©e'}, B√©n√©ficiaire: ${item.beneficiaire || 'Non pr√©cis√©'}`;
                                    break;
                            }
                            
                            resumeHTML += `</div></div>`;
                        });
                        
                        resumeHTML += `</div>`;
                    }
                });
                
                // Obligations religieuses
                if (data.zakatStatus || data.jeuneStatus || data.hadjStatus) {
                    resumeHTML += `<div class="card"><h3 class="card-title">Obligations Religieuses</h3>`;
                    
                    if (data.zakatStatus) {
                        let zakatText = '';
                        switch(data.zakatStatus) {
                            case 'versee': zakatText = 'Zakat vers√©e'; break;
                            case 'non-versee': zakatText = 'Zakat non vers√©e'; break;
                            case 'partielle': zakatText = 'Zakat partiellement vers√©e'; break;
                        }
                        resumeHTML += `<div class="summary-item"><div class="summary-title">Zakat</div><div class="summary-content">${zakatText}</div></div>`;
                    }
                    
                    if (data.jeuneStatus) {
                        let jeuneText = '';
                        if (data.jeuneStatus === '0') {
                            jeuneText = 'Aucun jour de je√ªne √† rattraper';
                        } else if (data.jeuneStatus === 'plus') {
                            jeuneText = 'Plus de 10 jours de je√ªne √† rattraper';
                        } else {
                            jeuneText = `${data.jeuneStatus} jour(s) de je√ªne √† rattraper`;
                        }
                        resumeHTML += `<div class="summary-item"><div class="summary-title">Je√ªne de Ramadan</div><div class="summary-content">${jeuneText}</div></div>`;
                        
                        if (data.jeuneNotes) {
                            resumeHTML += `<div class="summary-item"><div class="summary-title">Notes sur le je√ªne</div><div class="summary-content">${data.jeuneNotes}</div></div>`;
                        }
                    }
                    
                    if (data.hadjStatus) {
                        let hadjText = '';
                        switch(data.hadjStatus) {
                            case 'accompli': hadjText = 'Hadj accompli'; break;
                            case 'non-accompli': hadjText = 'Hadj non accompli'; break;
                            case 'partiel': hadjText = 'Hadj partiellement accompli (Omra seulement)'; break;
                        }
                        resumeHTML += `<div class="summary-item"><div class="summary-title">P√®lerinage</div><div class="summary-content">${hadjText}</div></div>`;
                        
                        if (data.hadjNotes) {
                            resumeHTML += `<div class="summary-item"><div class="summary-title">Notes sur le Hadj</div><div class="summary-content">${data.hadjNotes}</div></div>`;
                        }
                    }
                    
                    resumeHTML += `</div>`;
                }
                
                // H√©ritage et legs
                if (data.heritageNotes) {
                    resumeHTML += `
                        <div class="card">
                            <h3 class="card-title">R√©partition de l'H√©ritage</h3>
                            <div class="summary-item">
                                <div class="summary-content">${data.heritageNotes}</div>
                            </div>
                        </div>
                    `;
                }
                
                if (data.legs && data.legs.length > 0) {
                    resumeHTML += `<div class="card"><h3 class="card-title">Legs Testamentaires</h3>`;
                    
                    data.legs.forEach((leg, index) => {
                        resumeHTML += `
                            <div class="summary-item">
                                <div class="summary-title">Legs ${index + 1}</div>
                                <div class="summary-content">
                                    B√©n√©ficiaire: ${leg.beneficiaire || 'Non pr√©cis√©'}<br>
                                    Type: ${leg.type || 'Non pr√©cis√©'}<br>
                                    ${leg.valeur ? 'Valeur: ' + leg.valeur + '<br>' : ''}
                                    ${leg.relation ? 'Relation: ' + leg.relation + '<br>' : ''}
                                    Description: ${leg.description || 'Non pr√©cis√©e'}
                                </div>
                            </div>
                        `;
                    });
                    
                    resumeHTML += `</div>`;
                }
                
                if (data.executeurTestament) {
                    resumeHTML += `
                        <div class="card">
                            <h3 class="card-title">Ex√©cuteur Testamentaire</h3>
                            <div class="summary-item">
                                <div class="summary-content">
                                    ${data.executeurTestament}<br>
                                    ${data.contactExecuteur ? 'Contact: ' + data.contactExecuteur : ''}
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                if (data.volontesObseques) {
                    resumeHTML += `
                        <div class="card">
                            <h3 class="card-title">Volont√©s concernant les Obs√®ques</h3>
                            <div class="summary-item">
                                <div class="summary-content">${data.volontesObseques}</div>
                            </div>
                        </div>
                    `;
                }
                
                if (data.recommandationsFamille) {
                    resumeHTML += `
                        <div class="card">
                            <h3 class="card-title">Recommandations √† la Famille</h3>
                            <div class="summary-item">
                                <div class="summary-content">${data.recommandationsFamille}</div>
                            </div>
                        </div>
                    `;
                }
                
                // Donn√©es num√©riques
                const categoriesNumerique = ['reseaux_sociaux', 'emails', 'comptes_online', 'cloud', 'appareils'];
                categoriesNumerique.forEach(category => {
                    if (data[category] && data[category].length > 0) {
                        let categoryTitle = '';
                        switch(category) {
                            case 'reseaux_sociaux': categoryTitle = 'R√©seaux Sociaux'; break;
                            case 'emails': categoryTitle = 'Comptes Email'; break;
                            case 'comptes_online': categoryTitle = 'Comptes en Ligne'; break;
                            case 'cloud': categoryTitle = 'Services Cloud'; break;
                            case 'appareils': categoryTitle = 'Appareils S√©curis√©s'; break;
                        }
                        
                        resumeHTML += `<div class="card"><h3 class="card-title">${categoryTitle}</h3>`;
                        
                        data[category].forEach((item, index) => {
                            resumeHTML += `
                                <div class="summary-item">
                                    <div class="summary-title">√âl√©ment ${index + 1}</div>
                                    <div class="summary-content">`;
                            
                            switch(category) {
                                case 'reseaux_sociaux':
                                    resumeHTML += `R√©seau: ${item.type || 'Non pr√©cis√©'}, Pseudo: ${item.pseudo || 'Non pr√©cis√©'}, Email: ${item.email || 'Non pr√©cis√©'}`;
                                    if (item.telephone) resumeHTML += `, T√©l√©phone: ${item.telephone}`;
                                    if (item.complements) resumeHTML += `, Compl√©ments: ${item.complements}`;
                                    break;
                                    
                                case 'emails':
                                    resumeHTML += `Email: ${item.adresse || 'Non pr√©cis√©'}, Type: ${item.type || 'Non pr√©cis√©'}`;
                                    if (item.complements) resumeHTML += `, Compl√©ments: ${item.complements}`;
                                    break;
                                    
                                case 'comptes_online':
                                    resumeHTML += `Site: ${item.site || 'Non pr√©cis√©'}, Email: ${item.email || 'Non pr√©cis√©'}, Identifiant: ${item.identifiant || 'Non pr√©cis√©'}`;
                                    if (item.complements) resumeHTML += `, Compl√©ments: ${item.complements}`;
                                    break;
                                    
                                case 'cloud':
                                    resumeHTML += `Service: ${item.service || 'Non pr√©cis√©'}, Pseudo: ${item.pseudo || 'Non pr√©cis√©'}, Email: ${item.email || 'Non pr√©cis√©'}`;
                                    if (item.complements) resumeHTML += `, Compl√©ments: ${item.complements}`;
                                    break;
                                    
                                case 'appareils':
                                    resumeHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Mod√®le: ${item.modele || 'Non pr√©cis√©'}`;
                                    if (item.complements) resumeHTML += `, Compl√©ments: ${item.complements}`;
                                    break;
                            }
                            
                            resumeHTML += `</div></div>`;
                        });
                        
                        resumeHTML += `</div>`;
                    }
                });
                
                // Autres informations
                if (data.autresProches) {
                    resumeHTML += `
                        <div class="card">
                            <h3 class="card-title">Autres Personnes √† Mentionner</h3>
                            <div class="summary-item">
                                <div class="summary-content">${data.autresProches}</div>
                            </div>
                        </div>
                    `;
                }
                
                if (data.relationsParticulieres) {
                    resumeHTML += `
                        <div class="card">
                            <h3 class="card-title">Relations Particuli√®res</h3>
                            <div class="summary-item">
                                <div class="summary-content">${data.relationsParticulieres}</div>
                            </div>
                        </div>
                    `;
                }
                
                if (data.autresVolontes) {
                    resumeHTML += `
                        <div class="card">
                            <h3 class="card-title">Autres Volont√©s</h3>
                            <div class="summary-item">
                                <div class="summary-content">${data.autresVolontes}</div>
                            </div>
                        </div>
                    `;
                }
                
                resumeContainer.innerHTML = resumeHTML;
                changerEtape(7);
            }, 500);
        }

        // Fonction pour r√©cup√©rer toutes les donn√©es du formulaire
        function recupererToutesLesDonnees() {
            const data = {};
            
            // R√©cup√©rer les champs de base
            const champsBase = document.querySelectorAll('#testamentForm input, #testamentForm select, #testamentForm textarea');
            champsBase.forEach(champ => {
                if (champ.name && !champ.name.includes('[')) {
                    data[champ.name] = champ.value;
                }
            });
            
            // R√©cup√©rer les donn√©es des cat√©gories dynamiques
            const categories = ['parents', 'conjoints', 'freres-soeurs', 'enfants', 'amis', 
                               'immobilier', 'materiel', 'personnels', 'comptes', 'cartes', 'applications',
                               'creances', 'dettes', 'sadaqa', 'reseaux_sociaux', 'emails', 'comptes_online', 'cloud', 'appareils', 'legs'];
            
            categories.forEach(category => {
                const entries = [];
                const inputs = document.querySelectorAll(`[name^="${category}["]`);
                
                let currentIndex = -1;
                let currentEntry = {};
                
                inputs.forEach(input => {
                    const name = input.name;
                    const match = name.match(new RegExp(`${category}\\[(\\d+)\\]\\[(\\w+)\\]`));
                    
                    if (match) {
                        const index = parseInt(match[1]);
                        const field = match[2];
                        
                        if (index !== currentIndex) {
                            if (currentIndex !== -1) {
                                entries.push(currentEntry);
                            }
                            currentEntry = {};
                            currentIndex = index;
                        }
                        
                        currentEntry[field] = input.value;
                    }
                });
                
                // Ajouter la derni√®re entr√©e
                if (currentIndex !== -1) {
                    entries.push(currentEntry);
                }
                
                if (entries.length > 0) {
                    data[category] = entries;
                }
            });
            
            return data;
        }

        // Fonction pour g√©n√©rer le contenu HTML du PDF
        function genererContenuHTML() {
            const date = new Date().toLocaleDateString('fr-FR', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // R√©cup√©rer TOUTES les donn√©es du formulaire, y compris les entr√©es dynamiques
            const data = recupererToutesLesDonnees();
            
            // R√©cup√©rer les donn√©es des personnes
            const categoriesPersonnes = ['parents', 'conjoints', 'freres-soeurs', 'enfants', 'amis'];
            let personnesHTML = '';
            
            categoriesPersonnes.forEach(category => {
                if (data[category] && data[category].length > 0) {
                    let categoryTitle = '';
                    switch(category) {
                        case 'parents': categoryTitle = 'PARENTS'; break;
                        case 'conjoints': categoryTitle = 'CONJOINTS'; break;
                        case 'freres-soeurs': categoryTitle = 'FR√àRES ET SOEURS'; break;
                        case 'enfants': categoryTitle = 'ENFANTS'; break;
                        case 'amis': categoryTitle = 'AMIS PROCHES'; break;
                    }
                    
                    personnesHTML += `<div class="section">
                        <div class="section-title">${categoryTitle}</div>`;
                    
                    data[category].forEach((person, index) => {
                        personnesHTML += `
                        <div class="field"><span class="field-label">Personne ${index + 1} :</span> ${person.prenom || ''} ${person.nom || ''}</div>
                        <div class="field"><span class="field-label">T√©l√©phone :</span> ${person.telephone || 'Non pr√©cis√©'}</div>
                        <div class="field"><span class="field-label">Adresse :</span> ${person.adresse || 'Non pr√©cis√©e'}</div>
                        <br>`;
                    });
                    
                    personnesHTML += `</div>`;
                }
            });
            
            // R√©cup√©rer les donn√©es des biens (√©tape 3)
            const categoriesBiens = ['immobilier', 'materiel', 'personnels', 'comptes', 'cartes', 'applications'];
            let biensHTML = '';
            
            categoriesBiens.forEach(category => {
                if (data[category] && data[category].length > 0) {
                    let categoryTitle = '';
                    switch(category) {
                        case 'immobilier': categoryTitle = 'BIENS IMMOBILIERS'; break;
                        case 'materiel': categoryTitle = 'BIENS MAT√âRIELS'; break;
                        case 'personnels': categoryTitle = 'BIENS PERSONNELS'; break;
                        case 'comptes': categoryTitle = 'COMPTES BANCAIRES'; break;
                        case 'cartes': categoryTitle = 'CARTES BANCAIRES'; break;
                        case 'applications': categoryTitle = 'APPLICATIONS BANCAIRES'; break;
                    }
                    
                    biensHTML += `<div class="section">
                        <div class="section-title">${categoryTitle}</div>`;
                    
                    data[category].forEach((bien, index) => {
                        biensHTML += `<div class="field"><span class="field-label">√âl√©ment ${index + 1} :</span>`;
                        
                        switch(category) {
                            case 'immobilier':
                                biensHTML += `Type: ${bien.type || 'Non pr√©cis√©'}, Adresse: ${bien.adresse || 'Non pr√©cis√©e'}, Valeur: ${bien.valeur || 'Non pr√©cis√©e'}‚Ç¨, Statut: ${bien.statut || 'Non pr√©cis√©'}`;
                                if (bien.info) biensHTML += `, Info: ${bien.info}`;
                                break;
                                
                            case 'materiel':
                                biensHTML += `Type: ${bien.type || 'Non pr√©cis√©'}, Description: ${bien.description || 'Non pr√©cis√©e'}, Valeur: ${bien.valeur || 'Non pr√©cis√©e'}‚Ç¨, Lieu: ${bien.lieu || 'Non pr√©cis√©'}`;
                                break;
                                
                            case 'personnels':
                                biensHTML += `Type: ${bien.type || 'Non pr√©cis√©'}, Description: ${bien.description || 'Non pr√©cis√©e'}, Valeur: ${bien.valeur || 'Non pr√©cis√©e'}‚Ç¨, Lieu: ${bien.lieu || 'Non pr√©cis√©'}`;
                                break;
                                        
                            case 'comptes':
                                biensHTML += `Banque: ${bien.banque || 'Non pr√©cis√©e'}, Type: ${bien.type || 'Non pr√©cis√©'}, IBAN: ${bien.iban || 'Non pr√©cis√©'}, Solde: ${bien.solde || 'Non pr√©cis√©'}‚Ç¨`;
                                if (bien.adresse) biensHTML += `, Adresse: ${bien.adresse}`;
                                break;
                                
                            case 'cartes':
                                biensHTML += `Type: ${bien.type || 'Non pr√©cis√©'}, Num√©ro: ${bien.numero || 'Non pr√©cis√©'}, Expiration: ${bien.expiration || 'Non pr√©cis√©e'}, Banque: ${bien.banque || 'Non pr√©cis√©e'}`;
                                if (bien.code) biensHTML += `, Code: ${bien.code}`;
                                break;
                                
                            case 'applications':
                                biensHTML += `Application: ${bien.application || 'Non pr√©cis√©e'}, Identifiant: ${bien.identifiant || 'Non pr√©cis√©'}, Email: ${bien.email || 'Non pr√©cis√©'}, T√©l√©phone: ${bien.telephone || 'Non pr√©cis√©'}`;
                                if (bien.indice) biensHTML += `, Indice: ${bien.indice}`;
                                break;
                        }
                        
                        biensHTML += `</div>`;
                    });
                    
                    biensHTML += `</div>`;
                }
            });
            
            // R√©cup√©rer les donn√©es des dettes et cr√©ances (√©tape 4)
            let dettesHTML = '';
            const categoriesDettes = ['creances', 'dettes', 'sadaqa'];
            
            categoriesDettes.forEach(category => {
                if (data[category] && data[category].length > 0) {
                    let categoryTitle = '';
                    switch(category) {
                        case 'creances': categoryTitle = 'CR√âANCES √Ä PERCEVOIR'; break;
                        case 'dettes': categoryTitle = 'DETTES √Ä R√âGLER'; break;
                        case 'sadaqa': categoryTitle = 'SADAQA √Ä EFFECTUER'; break;
                    }
                    
                    dettesHTML += `<div class="section">
                        <div class="section-title">${categoryTitle}</div>`;
                    
                    data[category].forEach((item, index) => {
                        dettesHTML += `<div class="field"><span class="field-label">√âl√©ment ${index + 1} :</span>`;
                        
                        switch(category) {
                            case 'creances':
                                dettesHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Montant: ${item.montant || 'Non pr√©cis√©'}‚Ç¨, D√©biteur: ${item.nom || 'Non pr√©cis√©'}`;
                                if (item.date_remboursement) dettesHTML += `, Date remboursement: ${item.date_remboursement}`;
                                break;
                                
                            case 'dettes':
                                dettesHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Montant: ${item.montant || 'Non pr√©cis√©'}‚Ç¨, Cr√©ancier: ${item.nom || 'Non pr√©cis√©'}`;
                                if (item.date_echeance) dettesHTML += `, Date √©ch√©ance: ${item.date_echeance}`;
                                break;
                                
                            case 'sadaqa':
                                dettesHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Description: ${item.description || 'Non pr√©cis√©e'}, B√©n√©ficiaire: ${item.beneficiaire || 'Non pr√©cis√©'}`;
                                break;
                        }
                        
                        dettesHTML += `</div>`;
                    });
                    
                    dettesHTML += `</div>`;
                }
            });
            
            // R√©cup√©rer les donn√©es des devoirs religieux (√©tape 4)
            let devoirsHTML = '';
            
            if (data.zakatStatus || data.jeuneStatus || data.hadjStatus) {
                devoirsHTML += `<div class="section">
                    <div class="section-title">DEVOIRS RELIGIEUX</div>`;
                
                if (data.zakatStatus) {
                    let zakatText = '';
                    switch(data.zakatStatus) {
                        case 'versee': zakatText = 'Zakat vers√©e'; break;
                        case 'non-versee': zakatText = 'Zakat non vers√©e'; break;
                        case 'partielle': zakatText = 'Zakat partiellement vers√©e'; break;
                    }
                    devoirsHTML += `<div class="field"><span class="field-label">Zakat :</span> ${zakatText}</div>`;
                }
                
                if (data.jeuneStatus) {
                    let jeuneText = '';
                    if (data.jeuneStatus === '0') {
                        jeuneText = 'Aucun jour de je√ªne √† rattraper';
                    } else if (data.jeuneStatus === 'plus') {
                        jeuneText = 'Plus de 10 jours de je√ªne √† rattraper';
                    } else {
                        jeuneText = `${data.jeuneStatus} jour(s) de je√ªne √† rattraper`;
                    }
                    devoirsHTML += `<div class="field"><span class="field-label">Je√ªne de Ramadan :</span> ${jeuneText}</div>`;
                    
                    if (data.jeuneNotes) {
                        devoirsHTML += `<div class="field"><span class="field-label">Notes sur le je√ªne :</span> ${data.jeuneNotes}</div>`;
                    }
                }
                
                if (data.hadjStatus) {
                    let hadjText = '';
                    switch(data.hadjStatus) {
                        case 'accompli': hadjText = 'Hadj accompli'; break;
                        case 'non-accompli': hadjText = 'Hadj non accompli'; break;
                        case 'partiel': hadjText = 'Hadj partiellement accompli (Omra seulement)'; break;
                    }
                    devoirsHTML += `<div class="field"><span class="field-label">P√®lerinage :</span> ${hadjText}</div>`;
                    
                    if (data.hadjNotes) {
                        devoirsHTML += `<div class="field"><span class="field-label">Notes sur le Hadj :</span> ${data.hadjNotes}</div>`;
                    }
                }
                
                devoirsHTML += `</div>`;
            }
            
            // R√©cup√©rer les donn√©es d'h√©ritage (√©tape 5)
            let heritageHTML = '';
            
            if (data.heritageNotes) {
                heritageHTML += `<div class="section">
                    <div class="section-title">R√âPARTITION DE L'H√âRITAGE</div>
                    <div class="field"><span class="field-label">Notes sur l'h√©ritage :</span> ${data.heritageNotes}</div>
                </div>`;
            }
            
            // R√©cup√©rer les donn√©es des legs (√©tape 5)
            let legsHTML = '';
            
            if (data.legs && data.legs.length > 0) {
                legsHTML += `<div class="section">
                    <div class="section-title">LEGS TESTAMENTAIRES (WASIYYA)</div>`;
                
                data.legs.forEach((leg, index) => {
                    legsHTML += `
                    <div class="field"><span class="field-label">Legs ${index + 1} :</span> ${leg.beneficiaire || 'Non pr√©cis√©'}</div>
                    <div class="field"><span class="field-label">Type :</span> ${leg.type || 'Non pr√©cis√©'}</div>
                    <div class="field"><span class="field-label">Description :</span> ${leg.description || 'Non pr√©cis√©e'}</div>`;
                    
                    if (leg.valeur) {
                        legsHTML += `<div class="field"><span class="field-label">Valeur :</span> ${leg.valeur} ‚Ç¨</div>`;
                    }
                    
                    if (leg.relation) {
                        legsHTML += `<div class="field"><span class="field-label">Relation :</span> ${leg.relation}</div>`;
                    }
                    
                    legsHTML += `<br>`;
                });
                
                legsHTML += `</div>`;
            }
            
            // R√©cup√©rer les donn√©es num√©riques (√©tape 6)
            let numeriqueHTML = '';
            const categoriesNumerique = ['reseaux_sociaux', 'emails', 'comptes_online', 'cloud', 'appareils'];
            
            categoriesNumerique.forEach(category => {
                if (data[category] && data[category].length > 0) {
                    let categoryTitle = '';
                    switch(category) {
                        case 'reseaux_sociaux': categoryTitle = 'R√âSEAUX SOCIAUX'; break;
                        case 'emails': categoryTitle = 'COMPTES EMAIL'; break;
                        case 'comptes_online': categoryTitle = 'COMPTES EN LIGNE'; break;
                        case 'cloud': categoryTitle = 'SERVICES CLOUD'; break;
                        case 'appareils': categoryTitle = 'APPAREILS S√âCURIS√âS'; break;
                    }
                    
                    numeriqueHTML += `<div class="section">
                        <div class="section-title">${categoryTitle}</div>`;
                    
                    data[category].forEach((item, index) => {
                        numeriqueHTML += `<div class="field"><span class="field-label">√âl√©ment ${index + 1} :</span>`;
                        
                        switch(category) {
                            case 'reseaux_sociaux':
                                numeriqueHTML += `R√©seau: ${item.type || 'Non pr√©cis√©'}, Pseudo: ${item.pseudo || 'Non pr√©cis√©'}, Email: ${item.email || 'Non pr√©cis√©'}`;
                                if (item.telephone) numeriqueHTML += `, T√©l√©phone: ${item.telephone}`;
                                if (item.complements) numeriqueHTML += `, Compl√©ments: ${item.complements}`;
                                break;
                                
                            case 'emails':
                                numeriqueHTML += `Email: ${item.adresse || 'Non pr√©cis√©'}, Type: ${item.type || 'Non pr√©cis√©'}`;
                                if (item.complements) numeriqueHTML += `, Compl√©ments: ${item.complements}`;
                                break;
                                
                            case 'comptes_online':
                                numeriqueHTML += `Site: ${item.site || 'Non pr√©cis√©'}, Email: ${item.email || 'Non pr√©cis√©'}, Identifiant: ${item.identifiant || 'Non pr√©cis√©'}`;
                                if (item.complements) numeriqueHTML += `, Compl√©ments: ${item.complements}`;
                                break;
                                
                            case 'cloud':
                                numeriqueHTML += `Service: ${item.service || 'Non pr√©cis√©'}, Pseudo: ${item.pseudo || 'Non pr√©cis√©'}, Email: ${item.email || 'Non pr√©cis√©'}`;
                                if (item.complements) numeriqueHTML += `, Compl√©ments: ${item.complements}`;
                                break;
                                
                            case 'appareils':
                                numeriqueHTML += `Type: ${item.type || 'Non pr√©cis√©'}, Mod√®le: ${item.modele || 'Non pr√©cis√©'}`;
                                if (item.complements) numeriqueHTML += `, Compl√©ments: ${item.complements}`;
                                break;
                        }
                        
                        numeriqueHTML += `</div>`;
                    });
                    
                    numeriqueHTML += `</div>`;
                }
            });
            
            return `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Testament Islamique - Al Wassiya</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500&display=swap');
        
        body { 
            font-family: 'Poppins', sans-serif; 
            line-height: 1.7; 
            margin: 0;
            padding: 0;
            color: #1A2E40;
            background-color: #F8F5EE;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px;
            background: white;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.1);
        }
        
        .header { 
            text-align: center; 
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #C9B178;
        }
        
        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 36px;
            color: #C9B178;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 16px;
            color: #2D4C68;
            margin-bottom: 20px;
        }
        
        .bismillah { 
            font-size: 28px; 
            color: #C9B178; 
            font-weight: bold; 
            margin: 20px 0;
        }
        
        .title { 
            font-size: 24px; 
            font-weight: bold; 
            margin: 15px 0;
            color: #1A2E40;
            font-family: 'Playfair Display', serif;
        }
        
        .section { 
            margin: 30px 0;
            padding: 20px;
            border-radius: 10px;
            background: #F8F5EE;
            border-left: 4px solid #C9B178;
        }
        
        .section-title { 
            font-size: 18px; 
            font-weight: bold; 
            color: #C9B178;
            margin-bottom: 15px;
            font-family: 'Playfair Display', serif;
        }
        
        .field { 
            margin: 12px 0;
            display: flex;
        }
        
        .field-label {
            font-weight: 500;
            min-width: 180px;
        }
        
        .signature-section {
            margin-top: 60px;
            border-top: 1px solid #ddd;
            padding-top: 30px;
            page-break-before: always;
        }
        
        .verset {
            font-style: italic;
            text-align: center;
            color: #2D4C68;
            margin: 40px 0;
            padding: 20px;
            border-radius: 10px;
            background: #F8F5EE;
            border: 1px dashed #C9B178;
        }
        
        .footer {
            text-align: center;
            margin-top: 50px;
            font-size: 14px;
            color: #2D4C68;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
        
        .decoration {
            text-align: center;
            margin: 30px 0;
            color: #C9B178;
            opacity: 0.5;
        }
        
        @media print {
            body { 
                background: white;
                margin: 0;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 20px;
            }
            
            .section {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">Al Wassiya</div>
            <div class="subtitle">Votre Testament Islamique Simplifi√©</div>
            <div class="bismillah">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</div>
            <div class="title">TESTAMENT ISLAMIQUE (WASSIYA)</div>
            <p>Date de r√©daction : ${date}</p>
        </div>

        <div class="decoration">‚óÜ ‚óÜ ‚óÜ</div>

        <div class="section">
            <div class="section-title">IDENTIT√â DU TESTATEUR</div>
            <div class="field"><span class="field-label">Sexe :</span> ${data.sexe || 'Non pr√©cis√©'}</div>
            <div class="field"><span class="field-label">Nom :</span> ${data.nom || 'Non pr√©cis√©'}</div>
            <div class="field"><span class="field-label">Pr√©nom :</span> ${data.prenom || 'Non pr√©cis√©'}</div>
            <div class="field"><span class="field-label">Date de naissance :</span> ${data.dateNaissance ? new Date(data.dateNaissance).toLocaleDateString('fr-FR') : 'Non pr√©cis√©e'}</div>
            <div class="field"><span class="field-label">Lieu de naissance :</span> ${data.lieuNaissance || 'Non pr√©cis√©'}</div>
            <div class="field"><span class="field-label">Adresse :</span> ${data.adresse || 'Non pr√©cis√©e'}</div>
            <div class="field"><span class="field-label">Nationalit√© :</span> ${data.nationalite || 'Non pr√©cis√©e'}</div>
            <div class="field"><span class="field-label">Situation familiale :</span> ${data.situationFamiliale || 'Non pr√©cis√©e'}</div>
            ${data.conjoint ? `<div class="field"><span class="field-label">Conjoint :</span> ${data.conjoint}</div>` : ''}
        </div>

        ${personnesHTML}

        ${biensHTML ? `
        <div class="decoration">‚óÜ ‚óÜ ‚óÜ</div>
        
        <div class="section">
            <div class="section-title">BIENS MAT√âRIELS AND FINANCIERS</div>
            <p>Liste des biens mat√©riels et financiers d√©clar√©s par le testateur :</p>
        </div>
        
        ${biensHTML}
        ` : ''}

        ${dettesHTML ? `
        <div class="decoration">‚óÜ ‚óÜ ‚óÜ</div>
        
        <div class="section">
            <div class="section-title">DETTES ET CR√âANCES</div>
            <p>Liste des dettes √† r√©gler et cr√©ances √† percevoir :</p>
        </div>
        
        ${dettesHTML}
        ` : ''}

        ${devoirsHTML ? `
        <div class="decoration">‚óÜ ‚óÜ ‚óÜ</div>
        
        ${devoirsHTML}
        ` : ''}

        ${heritageHTML ? `
        <div class="decoration">‚óÜ ‚óÜ ‚óÜ</div>
        
        ${heritageHTML}
        ` : ''}

        ${legsHTML ? `
        <div class="decoration">‚óÜ ‚óÜ ‚óÜ</div>
        
        ${legsHTML}
        ` : ''}

        ${numeriqueHTML ? `
        <div class="decoration">‚óÜ ‚óÜ ‚óÜ</div>
        
        <div class="section">
            <div class="section-title">DONN√âES NUM√âRIQUES</div>
            <p>Liste des comptes num√©riques et appareils d√©clar√©s par le testateur :</p>
        </div>
        
        ${numeriqueHTML}
        ` : ''}

        <div class="section">
            <div class="section-title">VOLONT√âS CONCERNANT LES OBS√àQUES</div>
            <p>${data.volontesObseques || 'Selon les traditions islamiques'}</p>
        </div>

        <div class="section">
            <div class="section-title">RECOMMANDATIONS √Ä LA FAMILLE</div>
            <p>${data.recommandationsFamille || 'Que Allah vous b√©nisse et vous guide'}</p>
        </div>

        ${data.autresProches ? `
        <div class="section">
            <div class="section-title">AUTRES PERSONNES √Ä MENTIONNER</div>
            <p>${data.autresProches}</p>
        </div>` : ''}

        ${data.relationsParticulieres ? `
        <div class="section">
            <div class="section-title">RELATIONS PARTICULI√àRES</div>
            <p>${data.relationsParticulieres}</p>
        </div>` : ''}

        <div class="section">
            <div class="section-title">EX√âCUTEUR TESTAMENTAIRE</div>
            <div class="field"><span class="field-label">Personne sugg√©r√©e :</span> ${data.executeurTestament || '√Ä d√©signer par la famille'}</div>
            <div class="field"><span class="field-label">Contact :</span> ${data.contactExecuteur || 'Non pr√©cis√©'}</div>
        </div>

        ${data.autresVolontes ? `
        <div class="section">
            <div class="section-title">AUTRES VOLONT√âS</div>
            <p>${data.autresVolontes}</p>
        </div>` : ''}

        <div class="section">
            <div class="section-title">DISPOSITIONS IMPORTANTES</div>
            <ul>
                <li>Ce testament respecte les r√®gles de l'h√©ritage islamique (Mirath)</li>
                <li>Les dispositions ne concernent que le tiers (1/3) des biens maximum</li>
                <li>Les deux tiers restants sont distribu√©s selon les r√®gles coraniques</li>
                <li>Il est recommand√© de faire valider ce testament par un sp√©cialiste</li>
            </ul>
        </div>

        <div class="verset">
            "Et c'est Allah qui donne la vie et qui donne la mort. Et Allah observe parfaitement ce que vous faites." - Coran 3:156
        </div>

        <div class="signature-section">
            <p><strong>Signature du testateur :</strong> _______________________ &nbsp;&nbsp;&nbsp; <strong>Date :</strong> ${date}</p>
            <br>
            <p><strong>T√©moins (recommand√©) :</strong></p>
            <p>1. Nom : _________________ &nbsp;&nbsp;&nbsp; Signature : _________________</p>
            <p>2. Nom : _________________ &nbsp;&nbsp;&nbsp; Signature : _________________</p>
        </div>

        <div class="footer">
            <p>Qu'Allah accepte ce testament et facilite son ex√©cution selon Sa volont√©.</p>
            <p>G√©n√©r√© par Al Wassiya - Testament Islamique Simplifi√©</p>
        </div>
    </div>
</body>
</html>`;
        }

        // Fonction pour g√©n√©rer le PDF
        function genererPDF() {
            const content = genererContenuHTML();
            const printWindow = window.open('', '_blank');
            printWindow.document.write(content);
            printWindow.document.close();
            
            // Attendre que le contenu soit charg√© avant d'imprimer
            printWindow.onload = function() {
                printWindow.print();
            };
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Masquer le champ conjoint initialement
            document.getElementById('conjointField').style.display = 'none';
            
            // Afficher la premi√®re √©tape
            afficherEtape(1);
        });
    </script>
</body>
</html>
